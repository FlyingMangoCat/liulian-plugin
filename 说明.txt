# 榴莲插件 (Liulian-Plugin) 使用说明

## 📖 插件简介

Liulian-Plugin 是一个功能丰富的 Yunzai-Bot 插件，提供原神地下地图、B站推送、插件管理、AI对话、群聊互动等多功能扩展。

**🔗 项目地址**: https://gitee.com/huifeidemangguomao/liulian-plugin.git

## 🚀 快速开始

### 环境要求
- 最新版本的 Yunzai-Bot
- Node.js 环境
- pnpm 包管理器

### 安装步骤
1. 将整个 `liulian-plugin` 文件夹放置在 `Yunzai-Bot/plugins/` 目录下
2. 在插件目录下执行 `pnpm install -P` 安装依赖
3. 重启 Yunzai-Bot 即可使用

### ⚠️ 特别说明
- **TRSS版云崽用户**: 如插件载入时报错，请在 `config\config` 下创建 `qq.yaml`，模板路径 `liulian-plugin/config/qq.yaml`，根据ICQQ-plugin下config.yaml中的配置填写后即可正常使用
- **AI功能**: 榴莲AI已正式上线（目前可在往生堂业务群/榴莲官方群体验）

## 📊 项目概览

| 项目信息 | 详情 |
|---------|------|
| **名称** | 榴莲插件 (liulian-plugin) |
| **类型** | 云崽 (Yunzai-Bot) 插件 |
| **当前版本** | v0.11.6 |
| **描述** | 多功能扩展插件，提供原神地下地图、B站推送、插件管理、AI对话、群聊互动等功能 |

### 🛠️ 技术栈
- **编程语言**: JavaScript (Node.js)
- **模块系统**: ESM (ECMAScript Modules)
- **核心依赖**: 
  - `image-size`, `axios`, `ffmpeg`, `request`
  - `qrcode`, `ioredis`, `pg`, `mongoose`
  - `node-fetch`, `cheerio` 等

## 📦 目录结构

```
liulian-plugin/
├── apps/                 # 核心功能模块
│   ├── ai/              # AI对话系统
│   ├── expression/      # 表情资源
│   └── ...
├── components/          # 公共组件
│   ├── index.js        # 统一导出（使用别名 #liulian）
│   ├── liulianSafe.js  # Bot对象安全访问工具
│   ├── logger.js       # 统一日志工具
│   └── ...
├── model/              # 数据模型
├── resources/          # 静态资源
├── config/             # 配置文件
└── tools/              # 工具脚本
```

## 🎯 核心功能

### 🤖 AI 对话系统
- 基于 Ollama 的本地 AI 对话
- 情绪系统与好感度联动
- 多模型智能路由
- 用户记忆和角色成长

### 🎮 原神/星铁相关
- 须弥雨林和沙漠地下地图
- 猜角色游戏（原神/星铁/邦布）
- 地图编号查询

### 💬 群聊互动
- 娶群友、猫猫游戏
- 随机表情、表情制作
- 话痨统计、运势分析
- 天气、广播、群聊闭嘴

### 📺 B站生态
- B站动态推送
- 推送配置管理

### 🔧 插件管理
- 插件加载、卸载、列表查看
- V3云崽支持

## 🔧 开发约定

### 代码规范
- 使用 UTF-8 编码
- 添加准确的中文注释
- 使用别名 `#liulian` 导入公共组件
- 遵守 ESM 模块规范

### 模块导入
```javascript
// 推荐使用别名
import { Cfg, logger, liulianSafe } from '#liulian'

// 也支持默认导入（兼容性）
import Cfg from '#liulian'
```

## 📝 常用命令

### 帮助与状态
- `#榴莲帮助` / `#榴莲help` - 主帮助系统
- `#榴莲状态` - 插件状态检查
- `#榴莲版本` - 版本信息查询

### 系统管理
- `#榴莲设置[选项]` - 插件配置管理
- `#榴莲更新` / `#榴莲强制更新` - 插件更新
- `#榴莲更新图像` - 图像资源更新

## 🤝 贡献与反馈

### 项目维护
- 活跃开发中，持续更新功能和优化性能
- 欢迎提交 Issue 和 Pull Request

### 联系方式
- QQ群: 806760403
- Issues: https://gitee.com/huifeidemangguomao/liulian-plugin/issues
- B站专栏: https://b23.tv/GecaEsK

## 📄 开源协议

本项目开源，禁止商业用途，仅供学习交流使用。

---

**项目维护**: 活跃开发中，持续更新功能和优化性能  
**社区支持**: QQ群 806760403，Issues 反馈，B站专栏  
**开源协议**: 本项目开源，禁止商业用途，仅供学习交流使用